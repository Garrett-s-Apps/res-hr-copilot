"use strict";(()=>{var e={};e.id=744,e.ids=[744],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1812:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>y,patchFetch:()=>f,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>u,staticGenerationAsyncStorage:()=>m});var r={};o.r(r),o.d(r,{POST:()=>l});var a=o(9303),n=o(8716),i=o(670),s=o(7070),c=o(255);async function l(e){let{message:t,history:o=[]}=await e.json();if(process.env.AZURE_OPENAI_ENDPOINT&&process.env.AZURE_OPENAI_KEY)try{let e=process.env.AZURE_OPENAI_DEPLOYMENT??"gpt-4o",r=`${process.env.AZURE_OPENAI_ENDPOINT}/openai/deployments/${e}/chat/completions?api-version=2024-02-01`,a=`You are the HR assistant for RES LLC, an internal AI-powered knowledge base assistant.
Your role is to help employees find information about HR policies, benefits, time off, expenses, and company procedures.
Always be helpful, professional, and accurate. When citing information, mention the source document and page number.
If you don't know something, direct employees to contact HR at hr@res-llc.com or IT at it@res-llc.com.`,n=[{role:"system",content:a},...o.slice(-6).map(e=>({role:e.role,content:e.content})),{role:"user",content:t}],i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json","api-key":process.env.AZURE_OPENAI_KEY},body:JSON.stringify({messages:n,max_tokens:800,temperature:.3})});if(i.ok){let e=await i.json(),t=e.choices[0]?.message?.content??"";return s.NextResponse.json({response:t,citations:[],source:"azure"})}}catch(e){console.error("Azure OpenAI error, falling back to mock:",e)}await new Promise(e=>setTimeout(e,600));let{response:r,citations:a}=(0,c.gw)(t);return s.NextResponse.json({response:r,citations:a,source:"mock"})}let p=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:"app/api/chat/route"},resolvedPagePath:"/Users/garretteaglin/Projects/res-hr-copilot/portal/src/app/api/chat/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:u}=p,y="/api/chat/route";function f(){return(0,i.patchFetch)({serverHooks:u,staticGenerationAsyncStorage:m})}},255:(e,t,o)=>{o.d(t,{JC:()=>r,gw:()=>n});let r=[{id:"sr-001",title:"PTO & Time Off Policy — Vacation Accrual",excerpt:"Full-time employees accrue 15 days of vacation per year in the first three years of employment, increasing to 20 days after three years of service. Vacation accrues at a rate of 1.25 days per month and may be used after a 90-day introductory period.",department:"HR",docType:"Policy",source:"PTO & Time Off Policy",pageNumber:3,lastUpdated:"2024-02-01",score:.97},{id:"sr-002",title:"Employee Handbook — Leave of Absence",excerpt:"Employees may request a leave of absence for medical, family, or personal reasons. FMLA-eligible employees are entitled to up to 12 weeks of unpaid, job-protected leave per year. Submit leave requests to HR at least 30 days in advance when foreseeable.",department:"HR",docType:"Policy",source:"Employee Handbook 2024",pageNumber:41,lastUpdated:"2024-01-15",score:.89},{id:"sr-003",title:"Benefits Guide — Health Insurance Plans",excerpt:"RES LLC offers three medical plan tiers: Standard PPO, Premium PPO, and High-Deductible Health Plan (HDHP) with HSA. Company contributes 80% of employee premium and 60% of dependent coverage. Open enrollment occurs annually each April.",department:"HR",docType:"Benefits",source:"Benefits Guide 2024",pageNumber:12,lastUpdated:"2024-01-10",score:.82},{id:"sr-004",title:"Expense Reimbursement — Travel Per Diem",excerpt:"Employees traveling on company business are eligible for per diem meal allowances: $75/day domestic, $95/day international. Receipts are required for all expenses over $25. Submit expense reports within 30 days of travel.",department:"Finance",docType:"Policy",source:"Expense Reimbursement Policy",pageNumber:7,lastUpdated:"2024-01-30",score:.74}],a=[{keywords:["pto","vacation","time off","days off"],response:"Based on the RES LLC PTO policy, full-time employees accrue **15 vacation days per year** for their first three years, increasing to **20 days after year three**. You can use PTO after your 90-day introductory period. Sick leave is separate — you receive 10 sick days per year, non-accruing. Requests should be submitted in Workday at least 5 business days in advance for planned time off.",citations:[{docId:"doc-002",docTitle:"PTO & Time Off Policy",pageNumber:3,excerpt:"Full-time employees accrue 15 days of vacation per year in the first three years..."},{docId:"doc-001",docTitle:"Employee Handbook 2024",pageNumber:35,excerpt:"Sick leave is provided at 10 days per calendar year for all full-time employees..."}]},{keywords:["benefits","health","insurance","dental","vision","401k"],response:"RES LLC offers a comprehensive benefits package including:\n\n- **Medical**: Choice of Standard PPO, Premium PPO, or HDHP with HSA. Company pays 80% of your premium.\n- **Dental**: Delta Dental PPO with orthodontia coverage up to $2,000 lifetime.\n- **Vision**: VSP with annual exam and $200 frame allowance.\n- **401(k)**: Company matches 100% of first 4% of contributions. Vested immediately.\n- **Life Insurance**: 2x annual salary, company-paid.\n\nOpen enrollment is in April each year. Contact benefits@res-llc.com for questions.",citations:[{docId:"doc-003",docTitle:"Benefits Guide 2024",pageNumber:5,excerpt:"RES LLC contributes 80% of employee medical premium..."},{docId:"doc-003",docTitle:"Benefits Guide 2024",pageNumber:22,excerpt:"401(k) employer match: 100% of first 4% of eligible compensation..."}]},{keywords:["expense","reimbursement","travel","receipt"],response:"For expense reimbursement at RES LLC:\n\n1. **Submit within 30 days** of incurring the expense.\n2. **Receipts required** for all expenses over $25.\n3. **Per diem**: $75/day domestic travel, $95/day international.\n4. **Mileage**: Reimbursed at IRS rate (currently $0.67/mile).\n5. Submit via Concur or email to ap@res-llc.com with your manager's approval.\n\nPre-approval is required for expenses over $500.",citations:[{docId:"doc-007",docTitle:"Expense Reimbursement Policy",pageNumber:4,excerpt:"All expense reports must be submitted within 30 days of the expense date..."},{docId:"doc-007",docTitle:"Expense Reimbursement Policy",pageNumber:7,excerpt:"Per diem rates: $75 domestic, $95 international per day..."}]}];function n(e){let t=e.toLowerCase();for(let e of a)if(e.keywords.some(e=>t.includes(e)))return{response:e.response,citations:e.citations};return{response:`I found some information related to your question about "${e}". Based on RES LLC's HR documentation, I recommend reviewing the Employee Handbook (page 1-10) for general policies, or contacting HR directly at hr@res-llc.com for specific guidance. The IT Help Desk (it@res-llc.com) can also assist with system-related questions.`,citations:[{docId:"doc-001",docTitle:"Employee Handbook 2024",pageNumber:1,excerpt:"This handbook contains important information about RES LLC policies and procedures..."}]}}}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[948,972],()=>o(1812));module.exports=r})();